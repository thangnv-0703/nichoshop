import{s as N}from"./index-L-PgQcJD.js";import{_ as V,b as i,u as M,o as m,c as z,f as e,a as n,m as c,K as w,p,t as f,O as g,q as S,s as B,h as U}from"./index-BQF3oZCt.js";import{z as q,a as u,s as C}from"./index-AwnFXGMv.js";import{s as K}from"./index-CgxLEuey.js";import{b as R}from"./baseDetail-DxhJYTk4.js";import"./index-DslA2m8G.js";import"./index-s1Sp5cz9.js";const T={extends:R,setup(){const{proxy:h}=U(),s=i({password:"",newPassword:"",confirmedNewPassword:""}),_="moduleUser",r=M(),v=i(null);i(null);const x=i(q(u.object({newPassword:u.string({required_error:"Không được để trống"}).min(3,{message:"Ít nhất chứa 3 ký tự."}).refine(t=>/[a-z]/.test(t),{message:"Phải chứa chữ cái in thường."}).refine(t=>/[A-Z]/.test(t),{message:"Phải chứa chữ cái in hoa."}),confirmedNewPassword:u.string({required_error:"Không được để trống"}),password:u.string({required_error:"Không được để trống"})}).refine(t=>t.newPassword===t.confirmedNewPassword,{message:"Xác nhận mật khẩu không khớp.",path:["confirmedNewPassword"]})));return{model:s,module:_,onSubmit:async({valid:t})=>{const l=await h.$store.dispatch("moduleUser/changePassword",{password:s.value.password,newPassword:s.value.newPassword});l!=null&&l.data&&(S({severity:"success",summary:"Thành công",detail:"Đổi mật khẩu thành công",group:"tc",life:3e3}),r.push("/user/account/profile"))},resolver:x,formRef:v}}},X={class:""},D={class:"grid grid-cols-4 gap-4"},I={class:"col-span-3"},j={class:"mt-4"},A={class:"pl-4 min-w-[500px]"},E={class:"flex flex-col gap-1"},F={class:"pl-4 min-w-[500px]"},O={class:"flex flex-col gap-1"},Z={class:"pl-4 min-w-[500px]"},G={class:"flex flex-col gap-1"},H={class:"pl-4 min-w-[500px]"};function J(h,s,_,r,v,x){const d=K,t=C,l=B,y=N;return m(),z("div",X,[s[7]||(s[7]=e("p",{class:"text-xl"},"Đổi mật khẩu",-1)),s[8]||(s[8]=e("p",{class:"mb-2"}," Để bảo mật tài khoản, vui lòng không chia sẻ mật khẩu cho người khác ",-1)),s[9]||(s[9]=e("hr",null,null,-1)),e("div",D,[e("div",I,[n(y,{ref:"formRef",resolver:r.resolver,onSubmit:r.onSubmit,class:"flex flex-col gap-4 w-full"},{default:c(a=>{var P,k,b;return[e("table",j,[e("tbody",null,[e("tr",null,[s[3]||(s[3]=e("td",{class:"text-gray-400 text-right"},"Mật khẩu hiện tại",-1)),e("td",A,[e("div",E,[n(d,{name:"password",modelValue:r.model.password,"onUpdate:modelValue":s[0]||(s[0]=o=>r.model.password=o),class:"w-full",feedback:!1,fluid:"",toggleMask:""},null,8,["modelValue"]),(P=a.password)!=null&&P.invalid?(m(),w(t,{key:0,severity:"error",size:"small",variant:"simple"},{default:c(()=>{var o;return[p(f((o=a.password.error)==null?void 0:o.message),1)]}),_:2},1024)):g("",!0)])])]),e("tr",null,[s[4]||(s[4]=e("td",{class:"text-gray-400 text-right"},"Mật khẩu mới",-1)),e("td",F,[e("div",O,[n(d,{name:"newPassword",modelValue:r.model.newPassword,"onUpdate:modelValue":s[1]||(s[1]=o=>r.model.newPassword=o),class:"w-full",feedback:!1,fluid:"",toggleMask:""},null,8,["modelValue"]),(k=a.newPassword)!=null&&k.invalid?(m(),w(t,{key:0,ref:"newPasswordMessage",severity:"error",size:"small",variant:"simple"},{default:c(()=>{var o;return[p(f((o=a.newPassword.error)==null?void 0:o.message),1)]}),_:2},1024)):g("",!0)])])]),e("tr",null,[s[5]||(s[5]=e("td",{class:"text-gray-400 text-right"},"Xác nhận mật khẩu",-1)),e("td",Z,[e("div",G,[n(d,{name:"confirmedNewPassword",modelValue:r.model.confirmedNewPassword,"onUpdate:modelValue":s[2]||(s[2]=o=>r.model.confirmedNewPassword=o),class:"w-full",feedback:!1,fluid:"",toggleMask:""},null,8,["modelValue"]),(b=a.confirmedNewPassword)!=null&&b.invalid?(m(),w(t,{key:0,ref:"confirmedNewPasswordMessage",severity:"error",size:"small",variant:"simple"},{default:c(()=>{var o;return[p(f((o=a.confirmedNewPassword.error)==null?void 0:o.message),1)]}),_:2},1536)):g("",!0)])])]),e("tr",null,[s[6]||(s[6]=e("td",null,null,-1)),e("td",H,[n(l,{label:"Xác nhận",type:"submit",severity:"warn"})])])])])]}),_:1},8,["resolver","onSubmit"])])])])}const os=V(T,[["render",J],["__scopeId","data-v-1752f267"]]);export{os as default};
