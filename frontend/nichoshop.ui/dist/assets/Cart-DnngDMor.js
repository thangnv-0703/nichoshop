import{_ as w,e as I,h as k,b as x,k as S,o as p,c as v,a as r,f as t,l as B,m as u,t as c,p as C,F as N,s as P}from"./index-BQF3oZCt.js";import{s as V,a as q}from"./index-CmghECLX.js";import{s as M}from"./index-63x2-uDn.js";import{_ as T}from"./Header-D3I1zP_P.js";import{b as Q,_ as b}from"./baseList-0ae0gLgh.js";import"./index-DslA2m8G.js";import"./index-D963v2vF.js";import"./index-Bw6hrj4C.js";import"./index-s1Sp5cz9.js";import"./index-GCp0hiyu.js";const $={extends:Q,setup(){I(async()=>{var e;const n=await i.$store.dispatch("moduleCart/getItem");o.value=(e=n==null?void 0:n.data)==null?void 0:e.id,s.value=i.items.filter(a=>a.isSelected)});const{proxy:i}=k(),o=x(null),f="moduleCartItem",s=x([]);S(s,(n,e)=>{l(n.filter(a=>!e.some(d=>d.id==a.id)),!0),l(e.filter(a=>!n.some(d=>d.id==a.id)),!1)});const _=n=>{n?s.value=b.unionBy(s.value,i.items,"id"):s.value=[]},y=(n,e)=>{if(n){let a=i.items.filter(d=>d.representative.name===e.representative.name);s.value=b.unionBy(s.value,a,"id")}else s.value=s.value.filter(a=>a.representative.name!==e.representative.name)},m=n=>s.value.filter(e=>e.representative.name===n.representative.name).length===i.items.filter(e=>e.representative.name===n.representative.name).length,l=(n,e)=>{n.length!==0&&i.$store.dispatch("moduleCartItem/updateCartItemMultiSelection",{SkuIds:n.map(a=>a.skuId),CartId:o.value,IsSelected:e})};return{selectedProducts:s,updateQuantity:(n,e)=>{const a=i.items.find(d=>d.id===n.id);i.$store.dispatch("moduleCartItem/updateItem",{Id:a==null?void 0:a.skuId,CartId:o.value,Quantity:e?--a.quantity:++a.quantity})},module:f,isGroupChecked:m,selectProductsInGroup:y,selectAllProducts:_,getTotalPrice:()=>s.value.reduce((n,e)=>n+e.amount*e.quantity,0).toLocaleString("vi-VN"),updateSelection:l}}},G={class:"card nicho-container"},L={key:0},F={class:"flex gap-3"},j={class:"flex gap-3 w-[350px]"},A={class:"flex"},D=["onClick"],O={class:"quantity"},U=["onClick"],X={class:"flex justify-end"},E=["onClick"],H={class:"cart-footer"},K={class:"flex justify-between"},R={class:"flex items-center gap-4"},z={class:"flex items-center gap-4"},J={key:1,class:"list-empty"};function W(i,o,f,s,_,y){const m=T,l=V,h=M,g=q,n=P;return p(),v(N,null,[r(m),t("div",G,[i.items.length>0?(p(),v("div",L,[r(g,{selection:s.selectedProducts,"onUpdate:selection":o[0]||(o[0]=e=>s.selectedProducts=e),value:i.items,rowGroupMode:"subheader",groupRowsBy:"representative.name",sortMode:"single",sortField:"representative.name",sortOrder:1},B({default:u(()=>[r(l,{field:"isSelected",selectionMode:"multiple",headerStyle:"width: 3rem"}),r(l,{field:"name",header:"Sản phẩm",style:{"min-width":"520px"}},{body:u(e=>[t("div",F,[t("div",j,[o[2]||(o[2]=t("img",{src:"https://down-vn.img.susercontent.com/file/vn-11134207-7r98o-m045ss3gh8y750",width:"80",style:{"vertical-align":"middle"}},null,-1)),t("span",null,c(e.data.productName),1)]),t("div",null,[o[3]||(o[3]=t("div",null,"Phân loại hàng",-1)),t("div",null,c(e.data.productVariantName),1)])])]),_:1}),r(l,{field:"amount",header:"Đơn giá",style:{"min-width":"170px"}},{body:u(e=>[C(" ₫ "+c(e.data.amount.toLocaleString("vi-VN")),1)]),_:1}),r(l,{field:"quantity",header:"Số lượng",style:{"min-width":"160px"}},{body:u(e=>[t("div",A,[t("button",{onClick:a=>s.updateQuantity(e.data,!0),class:"w-[32px] decrease div-center cursor-pointer"},o[4]||(o[4]=[t("svg",{class:"icon"},[t("polygon",{points:"4.5 4.5 3.5 4.5 0 4.5 0 5.5 3.5 5.5 4.5 5.5 10 5.5 10 4.5"})],-1)]),8,D),t("div",O,c(e.data.quantity),1),t("button",{onClick:a=>s.updateQuantity(e.data,!1),class:"w-[32px] increase div-center cursor-pointer"},o[5]||(o[5]=[t("svg",{class:"icon"},[t("polygon",{points:"10 4.5 5.5 4.5 5.5 0 4.5 0 4.5 4.5 0 4.5 0 5.5 4.5 5.5 4.5 10 5.5 10 5.5 5.5 10 5.5"})],-1)]),8,U)])]),_:1}),r(l,{field:"price",header:"Số tiền",style:{"min-width":"120px"},bodyStyle:" color: #ee4d2d"},{body:u(e=>[C(" ₫ "+c((e.data.quantity*e.data.amount).toLocaleString("vi-VN")),1)]),_:1}),r(l,{exportable:!1,style:{width:"50px"}},{body:u(e=>[t("div",X,[t("span",{onClick:a=>i.deleteOne(e.data),class:"text-[#0B80CC] cursor-pointer ml-3"},"Xóa",8,E)])]),_:1})]),_:2},[void 0]),1032,["selection","value"]),t("div",H,[t("div",K,[t("div",R,[r(h,{"onUpdate:modelValue":o[1]||(o[1]=e=>s.selectAllProducts(e)),modelValue:s.selectedProducts.length==i.items.length,binary:""},null,8,["modelValue"]),o[6]||(o[6]=t("button",null,"Chọn tất cả",-1)),o[7]||(o[7]=t("button",null,"Xóa",-1))]),t("div",z,[t("span",null,"Tổng thanh toán ("+c(s.selectedProducts.length)+" sản phẩm)",1),t("span",null," đ "+c(s.getTotalPrice()),1),r(n,{label:"Mua hàng",class:"w-[210px]",severity:"warn"})])])])])):(p(),v("div",J,"Không có dữ liệu"))])],64)}const re=w($,[["render",W],["__scopeId","data-v-35733d6b"]]);export{re as default};
