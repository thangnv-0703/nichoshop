import{aZ as J,af as ie,h as ue,e as le,a_ as se,L as z,U as H,k as ce,a$ as Z,b0 as Q,b1 as fe,am as ve,B as pe,b2 as ye,o as de,c as he,N as me,w as be,P as ge}from"./index-BQF3oZCt.js";function K(e){"@babel/helpers - typeof";return K=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},K(e)}function X(e,r){return Se(e)||je(e,r)||Oe(e,r)||we()}function we(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oe(e,r){if(e){if(typeof e=="string")return ee(e,r);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ee(e,r):void 0}}function ee(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,i=Array(r);t<r;t++)i[t]=e[t];return i}function je(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var i,m,j,g,O=[],b=!0,w=!1;try{if(j=(t=t.call(e)).next,r!==0)for(;!(b=(i=j.call(t)).done)&&(O.push(i.value),O.length!==r);b=!0);}catch(_){w=!0,m=_}finally{try{if(!b&&t.return!=null&&(g=t.return(),Object(g)!==g))return}finally{if(w)throw m}}return O}}function Se(e){if(Array.isArray(e))return e}function re(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),t.push.apply(t,i)}return t}function $e(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?re(Object(t),!0).forEach(function(i){ae(e,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):re(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})}return e}function ae(e,r,t){return(r=ke(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ke(e){var r=Pe(e,"string");return K(r)=="symbol"?r:r+""}function Pe(e,r){if(K(e)!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var i=t.call(e,r||"default");if(K(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function R(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */R=function(){return r};var e,r={},t=Object.prototype,i=t.hasOwnProperty,m=Object.defineProperty||function(a,n,o){a[n]=o.value},j=typeof Symbol=="function"?Symbol:{},g=j.iterator||"@@iterator",O=j.asyncIterator||"@@asyncIterator",b=j.toStringTag||"@@toStringTag";function w(a,n,o){return Object.defineProperty(a,n,{value:o,enumerable:!0,configurable:!0,writable:!0}),a[n]}try{w({},"")}catch{w=function(o,l,c){return o[l]=c}}function _(a,n,o,l){var c=n&&n.prototype instanceof h?n:h,v=Object.create(c.prototype),u=new V(l||[]);return m(v,"_invoke",{value:U(a,o,u)}),v}function I(a,n,o){try{return{type:"normal",arg:a.call(n,o)}}catch(l){return{type:"throw",arg:l}}}r.wrap=_;var M="suspendedStart",Y="suspendedYield",E="executing",f="completed",s={};function h(){}function S(){}function d(){}var p={};w(p,g,function(){return this});var k=Object.getPrototypeOf,y=k&&k(k(C([])));y&&y!==t&&i.call(y,g)&&(p=y);var F=d.prototype=h.prototype=Object.create(p);function L(a){["next","throw","return"].forEach(function(n){w(a,n,function(o){return this._invoke(n,o)})})}function G(a,n){function o(c,v,u,$){var P=I(a[c],a,v);if(P.type!=="throw"){var N=P.arg,T=N.value;return T&&K(T)=="object"&&i.call(T,"__await")?n.resolve(T.__await).then(function(B){o("next",B,u,$)},function(B){o("throw",B,u,$)}):n.resolve(T).then(function(B){N.value=B,u(N)},function(B){return o("throw",B,u,$)})}$(P.arg)}var l;m(this,"_invoke",{value:function(v,u){function $(){return new n(function(P,N){o(v,u,P,N)})}return l=l?l.then($,$):$()}})}function U(a,n,o){var l=M;return function(c,v){if(l===E)throw Error("Generator is already running");if(l===f){if(c==="throw")throw v;return{value:e,done:!0}}for(o.method=c,o.arg=v;;){var u=o.delegate;if(u){var $=A(u,o);if($){if($===s)continue;return $}}if(o.method==="next")o.sent=o._sent=o.arg;else if(o.method==="throw"){if(l===M)throw l=f,o.arg;o.dispatchException(o.arg)}else o.method==="return"&&o.abrupt("return",o.arg);l=E;var P=I(a,n,o);if(P.type==="normal"){if(l=o.done?f:Y,P.arg===s)continue;return{value:P.arg,done:o.done}}P.type==="throw"&&(l=f,o.method="throw",o.arg=P.arg)}}}function A(a,n){var o=n.method,l=a.iterator[o];if(l===e)return n.delegate=null,o==="throw"&&a.iterator.return&&(n.method="return",n.arg=e,A(a,n),n.method==="throw")||o!=="return"&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+o+"' method")),s;var c=I(l,a.iterator,n.arg);if(c.type==="throw")return n.method="throw",n.arg=c.arg,n.delegate=null,s;var v=c.arg;return v?v.done?(n[a.resultName]=v.value,n.next=a.nextLoc,n.method!=="return"&&(n.method="next",n.arg=e),n.delegate=null,s):v:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,s)}function x(a){var n={tryLoc:a[0]};1 in a&&(n.catchLoc=a[1]),2 in a&&(n.finallyLoc=a[2],n.afterLoc=a[3]),this.tryEntries.push(n)}function D(a){var n=a.completion||{};n.type="normal",delete n.arg,a.completion=n}function V(a){this.tryEntries=[{tryLoc:"root"}],a.forEach(x,this),this.reset(!0)}function C(a){if(a||a===""){var n=a[g];if(n)return n.call(a);if(typeof a.next=="function")return a;if(!isNaN(a.length)){var o=-1,l=function c(){for(;++o<a.length;)if(i.call(a,o))return c.value=a[o],c.done=!1,c;return c.value=e,c.done=!0,c};return l.next=l}}throw new TypeError(K(a)+" is not iterable")}return S.prototype=d,m(F,"constructor",{value:d,configurable:!0}),m(d,"constructor",{value:S,configurable:!0}),S.displayName=w(d,b,"GeneratorFunction"),r.isGeneratorFunction=function(a){var n=typeof a=="function"&&a.constructor;return!!n&&(n===S||(n.displayName||n.name)==="GeneratorFunction")},r.mark=function(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,d):(a.__proto__=d,w(a,b,"GeneratorFunction")),a.prototype=Object.create(F),a},r.awrap=function(a){return{__await:a}},L(G.prototype),w(G.prototype,O,function(){return this}),r.AsyncIterator=G,r.async=function(a,n,o,l,c){c===void 0&&(c=Promise);var v=new G(_(a,n,o,l),c);return r.isGeneratorFunction(n)?v:v.next().then(function(u){return u.done?u.value:v.next()})},L(F),w(F,b,"Generator"),w(F,g,function(){return this}),w(F,"toString",function(){return"[object Generator]"}),r.keys=function(a){var n=Object(a),o=[];for(var l in n)o.push(l);return o.reverse(),function c(){for(;o.length;){var v=o.pop();if(v in n)return c.value=v,c.done=!1,c}return c.done=!0,c}},r.values=C,V.prototype={constructor:V,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!n)for(var o in this)o.charAt(0)==="t"&&i.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=e)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if(n.type==="throw")throw n.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var o=this;function l(N,T){return u.type="throw",u.arg=n,o.next=N,T&&(o.method="next",o.arg=e),!!T}for(var c=this.tryEntries.length-1;c>=0;--c){var v=this.tryEntries[c],u=v.completion;if(v.tryLoc==="root")return l("end");if(v.tryLoc<=this.prev){var $=i.call(v,"catchLoc"),P=i.call(v,"finallyLoc");if($&&P){if(this.prev<v.catchLoc)return l(v.catchLoc,!0);if(this.prev<v.finallyLoc)return l(v.finallyLoc)}else if($){if(this.prev<v.catchLoc)return l(v.catchLoc,!0)}else{if(!P)throw Error("try statement without catch or finally");if(this.prev<v.finallyLoc)return l(v.finallyLoc)}}}},abrupt:function(n,o){for(var l=this.tryEntries.length-1;l>=0;--l){var c=this.tryEntries[l];if(c.tryLoc<=this.prev&&i.call(c,"finallyLoc")&&this.prev<c.finallyLoc){var v=c;break}}v&&(n==="break"||n==="continue")&&v.tryLoc<=o&&o<=v.finallyLoc&&(v=null);var u=v?v.completion:{};return u.type=n,u.arg=o,v?(this.method="next",this.next=v.finallyLoc,s):this.complete(u)},complete:function(n,o){if(n.type==="throw")throw n.arg;return n.type==="break"||n.type==="continue"?this.next=n.arg:n.type==="return"?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):n.type==="normal"&&o&&(this.next=o),s},finish:function(n){for(var o=this.tryEntries.length-1;o>=0;--o){var l=this.tryEntries[o];if(l.finallyLoc===n)return this.complete(l.completion,l.afterLoc),D(l),s}},catch:function(n){for(var o=this.tryEntries.length-1;o>=0;--o){var l=this.tryEntries[o];if(l.tryLoc===n){var c=l.completion;if(c.type==="throw"){var v=c.arg;D(l)}return v}}throw Error("illegal catch attempt")},delegateYield:function(n,o,l){return this.delegate={iterator:C(n),resultName:o,nextLoc:l},this.method==="next"&&(this.arg=e),s}},r}function te(e,r,t,i,m,j,g){try{var O=e[j](g),b=O.value}catch(w){return void t(w)}O.done?r(b):Promise.resolve(b).then(i,m)}function q(e){return function(){var r=this,t=arguments;return new Promise(function(i,m){var j=e.apply(r,t);function g(b){te(j,i,m,g,O,"next",b)}function O(b){te(j,i,m,g,O,"throw",b)}g(void 0)})}}function Ee(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;ue()?le(e):r?e():se(e)}var Le=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=J({}),i=J({}),m=ie(function(){return Object.values(t).every(function(E){return!E.invalid})}),j=function(f,s){var h;return{value:s??((h=r.initialValues)===null||h===void 0?void 0:h[f]),touched:!1,dirty:!1,pristine:!0,valid:!0,invalid:!1,error:null,errors:[]}},g=function(f,s){var h=H(s,f);return h===!0||Z(h)&&h.includes(f)},O=function(){var E=q(R().mark(function f(s,h){var S,d,p;return R().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(d={},!Z(r[s])){y.next=7;break}return y.next=4,I(r[s]);case 4:d=y.sent,y.next=12;break;case 7:if(y.t0=(S=r[s])!==null&&S!==void 0?S:h,!y.t0){y.next=12;break}return y.next=11,I();case 11:d=y.sent;case 12:if(p=Object.keys(i).filter(function(F){var L;return(L=i[F])===null||L===void 0||(L=L.options)===null||L===void 0?void 0:L[s]})||[],y.t1=ve(p),!y.t1){y.next=18;break}return y.next=17,I(p);case 17:d=y.sent;case 18:return y.abrupt("return",d);case 19:case"end":return y.stop()}},f)}));return function(s,h){return E.apply(this,arguments)}}(),b=function(f,s,h,S){var d,p;((d=s==null?void 0:s[h])!==null&&d!==void 0?d:g(f,(p=r[h])!==null&&p!==void 0?p:S))&&I(f)},w=function(f,s){var h;t[f]||(t[f]=j(f,s==null?void 0:s.initialValue));var S=z((h=H(s,t[f]))===null||h===void 0?void 0:h.props,H(s==null?void 0:s.props,t[f]),{name:f,onBlur:function(){t[f].touched=!0,b(f,s,"validateOnBlur")},onInput:function(p){t[f].value=p.hasOwnProperty("value")?p.value:p.target.value},onChange:function(p){t[f].value=p.hasOwnProperty("value")?p.value:p.target.type==="checkbox"||p.target.type==="radio"?p.target.checked:p.target.value},onInvalid:function(p){var k;t[f].invalid=!0,t[f].errors=p,t[f].error=(k=p==null?void 0:p[0])!==null&&k!==void 0?k:null}});return i[f]={props:S,states:t[f],options:s},ce(function(){return t[f].value},function(d,p){t[f].pristine&&(t[f].pristine=!1),d!==p&&(t[f].dirty=!0),b(f,s,"validateOnValueUpdate",!0)}),[t[f],S]},_=function(f){return function(){var s=q(R().mark(function h(S){var d;return R().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,O("validateOnSubmit",!0);case 2:return d=k.sent,k.abrupt("return",f($e({originalEvent:S,valid:Q(m),states:Q(t),reset:M},d)));case 4:case"end":return k.stop()}},h)}));return function(h){return s.apply(this,arguments)}}()},I=function(){var E=q(R().mark(function f(s){var h,S,d,p,k,y,F,L,G,U,A,x,D,V,C,a,n,o,l,c;return R().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return k=Object.entries(t).reduce(function($,P){var N=X(P,2),T=N[0],B=N[1];return $.names.push(T),$.values[T]=B.value,$},{names:[],values:{}}),u.next=3,(S=r.resolver)===null||S===void 0?void 0:S.call(r,k);case 3:if(u.t1=h=u.sent,u.t0=u.t1!==null,!u.t0){u.next=7;break}u.t0=h!==void 0;case 7:if(!u.t0){u.next=11;break}u.t2=h,u.next=12;break;case 11:u.t2={};case 12:y=u.t2,(p=(d=y).errors)!==null&&p!==void 0||(d.errors={}),F=[s].flat(),L=0,G=Object.entries(i);case 16:if(!(L<G.length)){u.next=44;break}if(U=X(G[L],2),A=U[0],x=U[1],!(F.includes(A)||!s)){u.next=41;break}if(a=(D=x.options)===null||D===void 0?void 0:D.resolver,!a){u.next=36;break}return o=x.states.value,u.next=24,a({values:o,value:o,name:A});case 24:if(u.t4=n=u.sent,u.t3=u.t4!==null,!u.t3){u.next=28;break}u.t3=n!==void 0;case 28:if(!u.t3){u.next=32;break}u.t5=n,u.next=33;break;case 32:u.t5={};case 33:l=u.t5,Z(l.errors)&&(l.errors=ae({},A,l.errors)),y=fe(y,l);case 36:c=(V=y.errors[A])!==null&&V!==void 0?V:[],t[A].invalid=c.length>0,t[A].valid=!t[A].invalid,t[A].errors=c,t[A].error=(C=c==null?void 0:c[0])!==null&&C!==void 0?C:null;case 41:L++,u.next=16;break;case 44:return u.abrupt("return",y);case 45:case"end":return u.stop()}},f)}));return function(s){return E.apply(this,arguments)}}(),M=function(){Object.keys(t).forEach(function(f){var s;return i[f].states=t[f]=j(f,(s=i[f])===null||s===void 0||(s=s.options)===null||s===void 0?void 0:s.initialValue)})},Y=function(){O("validateOnMount")};return Ee(Y),{defineField:w,handleSubmit:_,validate:I,reset:M,valid:m,states:t,fields:i}},Ae={root:"p-form p-component"},Ie=pe.extend({name:"form",classes:Ae}),Fe={name:"BaseForm",extends:ge,style:Ie,props:{resolver:{type:Function,default:null},initialValues:{type:Object,default:null},validateOnValueUpdate:{type:[Boolean,Array],default:!0},validateOnBlur:{type:[Boolean,Array],default:!1},validateOnMount:{type:[Boolean,Array],default:!1},validateOnSubmit:{type:[Boolean,Array],default:!0}},provide:function(){return{$pcForm:this,$parentInstance:this}}};function W(e){"@babel/helpers - typeof";return W=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},W(e)}function ne(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),t.push.apply(t,i)}return t}function Te(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?ne(Object(t),!0).forEach(function(i){_e(e,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ne(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})}return e}function _e(e,r,t){return(r=Ne(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Ne(e){var r=Be(e,"string");return W(r)=="symbol"?r:r+""}function Be(e,r){if(W(e)!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var i=t.call(e,r||"default");if(W(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Ge(e,r){return Ce(e)||Ve(e,r)||De(e,r)||Me()}function Me(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function De(e,r){if(e){if(typeof e=="string")return oe(e,r);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?oe(e,r):void 0}}function oe(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,i=Array(r);t<r;t++)i[t]=e[t];return i}function Ve(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var i,m,j,g,O=[],b=!0,w=!1;try{if(j=(t=t.call(e)).next,r!==0)for(;!(b=(i=j.call(t)).done)&&(O.push(i.value),O.length!==r);b=!0);}catch(_){w=!0,m=_}finally{try{if(!b&&t.return!=null&&(g=t.return(),Object(g)!==g))return}finally{if(w)throw m}}return O}}function Ce(e){if(Array.isArray(e))return e}var Re={name:"Form",extends:Fe,inheritAttrs:!1,emits:["submit"],setup:function(r,t){var i=t.emit,m=Le(r),j=function(b,w){var _=m.defineField(b,w),I=Ge(_,2),M=I[1];return M},g=m.handleSubmit(function(O){i("submit",O)});return Te({register:j,onSubmit:g},ye(m,["handleSubmit"]))}};function Ke(e,r,t,i,m,j){return de(),he("form",z({onSubmit:r[0]||(r[0]=be(function(){return i.onSubmit&&i.onSubmit.apply(i,arguments)},["prevent"])),class:e.cx("root")},e.ptmi("root")),[me(e.$slots,"default",z({register:i.register,valid:e.valid,reset:e.reset},e.states))],16)}Re.render=Ke;export{Re as s};
